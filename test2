import requests

# Assuming qb_client has been successfully refreshed (from previous steps)
access_token = qb_client.access_token
company_id = qb_client.company_id

# 1. Define the Base URL (Use sandbox or production based on your token)
# Check qb_client.base_url to ensure you use the correct environment
base_url = "https://sandbox-quickbooks.api.intuit.com/v3/company" # Or use production URL

# 2. Define the Target Endpoint (e.g., CompanyInfo)
# The full URL structure is: BASE_URL / [RealmID] / [Entity] / [RealmID]
api_endpoint = f"{base_url}/{1442 2336 00}/companyinfo/{1442 2336 00}"

# 3. Define the Headers
headers = {
    'Authorization': f'Bearer {access_token}',
    'Accept': 'application/json'
}

print(f"Attempting GET request to: {api_endpoint}")

# 4. Execute the GET request
response = requests.get(api_endpoint, headers=headers)

# --- 5. Handle the Response ---
if response.status_code == 200:
    # Success! Print the formatted JSON response
    print("\n✅ API Request Successful. Raw Data:")
    import json
    print(json.dumps(response.json(), indent=4))
    
elif response.status_code == 401:
    # Token expired or invalid
    print("\n❌ Error 401: Unauthorized.")
    print("Your Access Token has expired. You MUST run the token refresh logic (Method B) again.")
    
else:
    # Other API error
    print(f"\n❌ API Request Failed with status code: {response.status_code}")
    print(f"Response Text: {response.text}")